<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #poke-list{
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .poke-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
            border-radius: 10px;
            width: 200px;
            box-shadow: rgba(0, 0, 0, 0.15) 2.4px 2.4px 3.2px;
            padding: 10px;
            margin: 10px;
        }

        .poke-img {
            width: 100px;
            height: 100px;
        }

        h1{
            text-align: center;
        }
    </style>
</head>

<body>
    <h1>나만의 포켓몬 도감</h1>
    <p><strong>총 <span id="total">0</span>마리</strong></p>
    <div id="poke-list">
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
        <div class="poke-card">
            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"
                alt="" class="poke-img">
            <span class="poke-id">1</span>
            <span class="poke-name">이상해씨</span>
            <span class="poke-species">씨앗포켓몬</span>
            <span class="poke-height">키 : <span>0.7</span>m</span>
            <span class="poke-weight">몸무게 : <span>6.9</span>kg</span>
        </div>
    </div>

    <script src="./js/jquery-3.7.0.js"></script>
    <script>
        // 키, 몸무게 정보 : https://pokeapi.co/api/v2/pokemon/1
        // 이름, 종 정보 : https://pokeapi.co/api/v2/pokemon-species/1

        //포켓몬 도감 만들기
        //1.Pokemon API에서 이름, 종, 키, 몸무게 4가지 정보 가져오기
        // * $.ajax() 활용
        //2.가져온 정보를 2개의 배열에 각각 저장하기
        //3.각 배열의 내용을 태그에 출력하기

        let speciesList = []; //이름, 종 데이터를 객체형태로 저장하는 배열
        let pokemonList = []; //키, 몸무게 데이터를 객체형태로 저장하는 배열
        
        const getPokeData = (id) => {

            let pokeURL = `https://pokeapi.co/api/v2/pokemon-species/${id}`;

            //async속성 : 통신방식을 비동기 or 동기처리로 변경할 수 있는 속성
            //true: 비동기 / false:동기
            $.ajax({
                url:pokeURL,
                async:false,
                success:(result)=>{
                    //서버로부터 응답받은 데이터는 매개변수를 만들어야 사용할 수 있다!!!
                    //console.log(result);

                    //console.log(result.names[2].name, result.genera[1].genus);
                    speciesList.push({name:result.names[2].name, 
                                      genus:result.genera[1].genus});

                },
                error:()=>{
                    alert("요청실패..");
                }
            });
        }

        const getPokeData2 = (id) => {

            let pokeURL = `https://pokeapi.co/api/v2/pokemon/${id}`;

            $.ajax({
                url: pokeURL,
                async:false,
                success:(result)=>{
                    //console.log(result.weight, result.height);

                    //키, 몸무게를 객체형태로 만든 후 배열에 저장해보기
                    pokemonList.push({weight:result.weight, 
                                      height:result.height});
                },
                error:()=>{
                    alert("요청실패..");
                }
            });

        }

        //포켓몬 카드를 그리는 함수 구현
        // - (이름, 종), (몸무게, 키) 정보를 가지는 배열을 입력값으로 받는 함수
        const drawPokemonCard = (species, pokemons) => {
            //반복문을 이용해서 모든 포켓몬카드를 resultHTML변수에 저장하기!
            let resultHTML = ``;
            
            for(let i=0; i<species.length; i++){
                resultHTML += `
                <div class="poke-card">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${i+1}.png"
                        alt="" class="poke-img">
                    <span class="poke-id">${i+1}</span>
                    <span class="poke-name">${species[i].name}</span>
                    <span class="poke-species">${species[i].genus}</span>
                    <span class="poke-height">키 : <span>${pokemons[i].height/10}</span>m</span>
                    <span class="poke-weight">몸무게 : <span>${pokemons[i].weight/10}</span>kg</span>
                </div>`;
            }

            // 총 포켓몬 수를 span태그에 출력하기
            $("#total").text(species.length);

            // 생성된 포켓몬카드를 id가 poke-list인 div태그에 출력하기
            $("#poke-list").append(resultHTML);
        }

        //151개의 이름, 종, 키,몸무게 정보를 출력해보기!
        for(let i=1; i<152; i++){
            getPokeData(i);
            getPokeData2(i);
        }

        // console.log(speciesList);
        // console.log(pokemonList);

        //포켓몬카드를 그리는 함수
        drawPokemonCard(speciesList, pokemonList);
        
        
        
    </script>

</body>

</html>